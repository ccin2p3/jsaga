<?xml version="1.0" encoding="UTF-8"?>
<ext:Job xmlns:ext="http://www.in2p3.fr/jsdl-extension">
    <ext:JobLifetimeManagement>
        <ext:Retry count="3" maxTime="PT80S" status="queued"/>
        <ext:Retry count="2" maxTime="PT6M" status="running"/>
        <ext:Retry count="1" status="failed"/>
    </ext:JobLifetimeManagement>
    <JobDefinition xmlns="http://schemas.ggf.org/jsdl/2005/11/jsdl">
        <JobDescription>
            <JobIdentification>
                <JobName>MYJOB_3</JobName>
            </JobIdentification>

            <Application>
                <!-- Application template identifier -->
                <ApplicationName>HelloWorld</ApplicationName>
                <ApplicationVersion>1.0</ApplicationVersion>
                <!-- Application definition -->
                <ext:ScriptApplication shell="/bin/sh">$EXEC $INPUT &gt; $STDOUT</ext:ScriptApplication>
                <p:POSIXApplication xmlns:p="http://schemas.ggf.org/jsdl/2005/11/jsdl-posix">
                    <p:Error>stderr.txt</p:Error>
                </p:POSIXApplication>
            </Application>

            <Resources>
                <CandidateHosts>
                    <HostName>myhost.in2p3.fr</HostName>
                    <HostName>otherhost.in2p3.fr</HostName>
                </CandidateHosts>
                <!-- automatically copied from grid default configuration file -->
                <FileSystem name="WorkingDirectory">
                    <FileSystemType>temporary</FileSystemType><!-- not persisted, not shared, but fast -->
                    <MountPoint>${GLITE_WORKDIR}</MountPoint>
                    <DiskSpace>
                        <LowerBoundedRange>2048</LowerBoundedRange>
                    </DiskSpace>
                </FileSystem>
                <FileSystem name="IntermediaryDirectory">
                    <FileSystemType>spool</FileSystemType>
                    <MountPoint>${INTERMEDIARY_DIRECTORY}</MountPoint>
                </FileSystem>
                <FileSystem name="ApplicationsDirectory">
                    <FileSystemType>normal</FileSystemType>
                    <MountPoint>${ATLAS_APPLICATIONS}</MountPoint>
                </FileSystem>
                <!-- user-defined file systems -->
                <FileSystem name="HelloWorldDirectory">
                    <FileSystemType>normal</FileSystemType>
                    <MountPoint>HelloWorld/1.1</MountPoint>
                    <ext:ParentFilesystemName>ApplicationsDirectory</ext:ParentFilesystemName>
                    <ext:Tag>HELLOWORLD_1.1</ext:Tag>
                </FileSystem>
                <FileSystem name="HelloWorldDirectory">
                    <FileSystemType>normal</FileSystemType>
                    <MountPoint>HelloWorld/1.2</MountPoint>
                    <ext:ParentFilesystemName>ApplicationsDirectory</ext:ParentFilesystemName>
                    <ext:Tag>HELLOWORLD_1.2</ext:Tag>
                </FileSystem>
                <FileSystem name="DataBaseDirectory">
                    <FileSystemType>normal</FileSystemType>
                    <MountPoint>database/1.0</MountPoint>
                    <ext:ParentFilesystemName>ApplicationsDirectory</ext:ParentFilesystemName>
                    <ext:Tag>DATABASE_1.0</ext:Tag>
                </FileSystem>
                <!-- automatically generated -->
                <TotalResourceCount>
                    <LowerBoundedRange>5</LowerBoundedRange>
                </TotalResourceCount>
            </Resources>

            <DataStaging name="EXEC">
                <FileName>bin/executable.exe</FileName>
                <FilesystemName>HelloWorldDirectory</FilesystemName>
                <CreationFlag>dontOverwrite</CreationFlag>
                <DeleteOnTermination>true</DeleteOnTermination>
                <Source/>
                <ext:CopyLocally>false</ext:CopyLocally>
                <ext:Shared>true</ext:Shared>
            </DataStaging>
            <DataStaging name="EXEC"><!-- automatically generated by rules "closeSE" -->
                <FileName>executable.exe</FileName>
                <FilesystemName>WorkingDirectory</FilesystemName>
                <CreationFlag>overwrite</CreationFlag>
                <DeleteOnTermination>true</DeleteOnTermination>
                <Source>
                    <URI>gsiftp://host/repository/helloworld.c#EGEE_proxy</URI>
                    <ext:Process>gcc -o $EXEC $@</ext:Process>
                </Source>
                <Target>
                    <ext:Process># delete the files missed by the job-wrapper</ext:Process>
                </Target>
                <ext:CopyLocally>false</ext:CopyLocally>
                <ext:Shared>truetrue</ext:Shared>
            </DataStaging>

            <DataStaging name="INPUT">
                <FileName>data_3.dat</FileName>
                <FilesystemName>DataBaseDirectory</FilesystemName>
                <CreationFlag>dontOverwrite</CreationFlag>
                <DeleteOnTermination>true</DeleteOnTermination>
                <Source/>
                <ext:CopyLocally>true</ext:CopyLocally>
                <ext:Shared>true</ext:Shared>
            </DataStaging>

            <DataStaging name="STDOUT">
                <FileName>stdout.txt</FileName>
                <FilesystemName>WorkingDirectory</FilesystemName>
                <CreationFlag>overwrite</CreationFlag>
                <DeleteOnTermination>true</DeleteOnTermination>
                <Target>
                    <URI>file://./MYJOB_3.out</URI>
                </Target>
                <ext:CopyLocally>false</ext:CopyLocally>
                <ext:Shared>false</ext:Shared>
            </DataStaging>
        </JobDescription>
    </JobDefinition>
</ext:Job>